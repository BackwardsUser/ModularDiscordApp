<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/main.styles.css">
    <title>main</title>
</head>
<header>
    <button class="account" id="account">
        <img src="" class="profilePicture" id="profilePicture">
        <a class="accountName" id="accountName"></a>
    </button>
    <div class="dropdown hidden" id="dropdown">
        <a class="logout" id="logout">Logout</a>
    </div>
    <button class="close" id="closeBtn">&times;</button>
</header>
<body>
    <select name="BotStatus" id="botStatus" class="botStatus" >
        <option value="online">Online</option>
        <option value="dnd">DnD</option>
        <option value="idle">Away</option>
        <option value="invisible">Offline</option>
    </select>
</body>
<script>

    basicClientData = {};

    const { ipcRenderer } = require('electron');
    const profilePicture = document.getElementById('profilePicture');
    const accountName = document.getElementById('accountName');

    ipcRenderer.send('account:login:request:basicClientInfo');

    ipcRenderer.on('account:login:send:clientBasicInfo', (e, basicClientInfo) => {
        basicClientData = basicClientInfo;
        profilePicture.src = basicClientData.avatarURL;
        accountName.innerHTML = basicClientData.name;
    });

    document.getElementById('closeBtn').addEventListener('click', () => {
        ipcRenderer.send('main:close');
    });

    document.getElementById('account').addEventListener('click', () => {
        const dropdown = document.getElementById('dropdown');
        if (dropdown.className === "dropdown hidden") {
            dropdown.className = "dropdown displayed";
        } else {
            dropdown.className = "dropdown hidden";
        };
    });

    document.getElementById('logout').addEventListener('click', () => {
        ipcRenderer.send('account:logout');
    });

    document.getElementById('botStatus').addEventListener('change', () => {
        console.log(document.getElementById('botStatus').value)
        ipcRenderer.send('account:status:changed', document.getElementById('botStatus').value)
    })

</script>
</html>